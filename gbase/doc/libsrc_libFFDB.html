<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by cdoc on Wed Jan 26 05:45:09 2005 -->
<title>
library libsrc/libFFDB
</title>
</head>
<body>
<a name="_top_"></a><pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libcssio.html#_top_">Previous</a>  <a href="libsrc_libFK.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
Library libsrc/libFFDB
</h1>
 A File-File database is a user defined directory
  structure of CSS table files and data files. The directory structure is
  based on the time associated with the table records. The date and time
  formatting UNIX routines strftime and strptime are used to convert from
  time to a table path and back. The FFDB library contains routines that
  have some of the SQL querying functionality of a relational database.
  <p>
  There are several restrictions on the top two directory levels of the
  database. All parameter files (CSS table files) except the wfdisc table and
  the static tables are located under "author" subdirectories, under a
  parameter root directory. The wfdisc tables and the data files are located
  under "station" subdirectories, under a segment root directory. The static
  tables (affiliation, site, sitechan, sensor, instrument and lastid) are
  located in a subdirectory called "static", under the parameter root
  directory. For example, a database of "year/month/day" directories could be
  created with an strftime date/time format of "%Y/%m/%d". It would look like:
  <pre>
         (param_root)/
             static/
                 global.affiliation
                 global.site
                 global.sitechan
                 global.sensor
                 global.instrument
                 global.lastid
 
             author1/
                 2004/
                     01/
                        05/
                           20040105.origin
                           20040105.arrival
                           20040105.assoc
                           ...
                        06/
                           ...
             author2/
                 ...
 
         (seg_root)/
             station1/
                 2004/
                     01/
                        05/
                           20040105.wfdisc
                           20040105.w
             station2/
                 ...
 
  </pre>
<hr>
<h2>
Source Files
</h2>
<menu>
<li> file <a href="libsrc_libFFDB_FFDBError.c.html">FFDBError.c</a>
<li> file <a href="libsrc_libFFDB_FFDBImport.c.html">FFDBImport.c</a>
<li> file <a href="libsrc_libFFDB_FFDBInsertTables.c.html">FFDBInsertTables.c</a>
<li> file <a href="libsrc_libFFDB_FFDBOpen.c.html">FFDBOpen.c</a>
<li> file <a href="libsrc_libFFDB_FFDBQueryTable.c.html">FFDBQueryTable.c</a>
<li> file <a href="libsrc_libFFDB_FFDBRequestIds.c.html">FFDBRequestIds.c</a>
<li> file <a href="libsrc_libFFDB_FFDBStatic.c.html">FFDBStatic.c</a>
<li> file <a href="libsrc_libFFDB_FFDBUpdateTables.c.html">FFDBUpdateTables.c</a>
</menu>
<h2>
Public Functions
</h2>
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBAuthors"><b>FFDBAuthors</b></a>(FFDatabase, char ***).
<dd> Get the Flat-File database authors.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBClose"><b>FFDBClose</b></a>(FFDatabase).
<dd> Close a Flat-File database.
<dt>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#FFDBConvertDateToDir"><b>FFDBConvertDateToDir</b></a>(const char *, double, char *).
<dd> Convert a time to a database directory path.
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBConvertDirToDate"><b>FFDBConvertDirToDate</b></a>(const char *, const char *, DateTime *).
<dd> Convert a database directory name to a DateTime.
<dt>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#FFDBCreateAuthor"><b>FFDBCreateAuthor</b></a>(FFDatabase, const char *).
<dd> Create an author directory.
<dt>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#FFDBCreateDir"><b>FFDBCreateDir</b></a>(const char *).
<dd> Create a database directory.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBDefaultAuthor"><b>FFDBDefaultAuthor</b></a>(FFDatabase).
<dd> Get the default author.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBDeleteTable"><b>FFDBDeleteTable</b></a>(FFDatabase, CssTable).
<dd> Delete a database table record.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBDirectoryDuration"><b>FFDBDirectoryDuration</b></a>(FFDatabase).
<dd> Get the Flat-File directory duration.
<dt>  <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrMsg"><b>FFDBErrMsg</b></a>().
<dd> Get a libFFDB error message.
<dt>  <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrno"><b>FFDBErrno</b></a>().
<dd> Get a libFFDB error number.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBGetAuthorWritable"><b>FFDBGetAuthorWritable</b></a>(FFDatabase, const char *).
<dd> Get the author access mode.
<dt>  <a href="libsrc_libFFDB_FFDBStatic.c.html#FFDBGetLikeNet"><b>FFDBGetLikeNet</b></a>(FFDatabase, const char *).
<dd> Get the network name.
<dt>  <a href="libsrc_libFFDB_FFDBStatic.c.html#FFDBGetNetwork"><b>FFDBGetNetwork</b></a>(FFDatabase, const char *).
<dd> Get the network that contains a station.
<dt>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#FFDBGetNextId"><b>FFDBGetNextId</b></a>(FFDatabase, const char *, const char *).
<dd> Get an id (keyvalue) from the lastid table and increment it.
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBGetQueryTable"><b>FFDBGetQueryTable</b></a>(const char *, char *, int, char *, int).
<dd> Get the table that a query will return.
<dt>  <a href="libsrc_libFFDB_FFDBStatic.c.html#FFDBGetStaticTable"><b>FFDBGetStaticTable</b></a>(FFDatabase, const char *).
<dd> Get a static table filename.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBGetWhereMembers"><b>FFDBGetWhereMembers</b></a>(CssTable, int *).
<dd> Return the members indices of a CssTable ordered for a where clause.
<dt>  <a href="libsrc_libFFDB_FFDBImport.c.html#FFDBImport"><b>FFDBImport</b></a>(FFDatabase, const char *).
<dd> Import table files.
<dt>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#FFDBInsertTable"><b>FFDBInsertTable</b></a>(FFDatabase, CssTable, const char *).
<dd> Insert one table record.
<dt>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#FFDBInsertTables"><b>FFDBInsertTables</b></a>(FFDatabase, int, CssTable *, const char *).
<dd> Insert more than one table record.
<dt>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#FFDBNumberIDsAvailable"><b>FFDBNumberIDsAvailable</b></a>(const char *).
<dd> Get the number of recycled ids available.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBOpen"><b>FFDBOpen</b></a>(const char *, const char *, const char *, double).
<dd> Open a Flat-File database.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBOpenPrefix"><b>FFDBOpenPrefix</b></a>(const char *).
<dd> 
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryPrefix"><b>FFDBQueryPrefix</b></a>(FFDatabase, const char *, const char *, Vector).
<dd> 
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTable"><b>FFDBQueryTable</b></a>(FFDatabase, const char *, const char *, Vector).
<dd> Fetch all table rows for a query.
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableClose"><b>FFDBQueryTableClose</b></a>(FFDB_QueryTableStruct).
<dd> Terminate a query that was initiated by FFDBQueryTableInit().
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableInit"><b>FFDBQueryTableInit</b></a>(FFDatabase, const char *, const char *, FFDB_QueryTableStruct *).
<dd> Submit a query that will return full table rows.
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableResults"><b>FFDBQueryTableResults</b></a>(FFDB_QueryTableStruct, int, int *, Vector).
<dd> Fetch the table rows that result from a query submitted to
   FFDBQueryTableInit().
<dt>  <a href="libsrc_libFFDB_FFDBStatic.c.html#FFDBReadStaticTable"><b>FFDBReadStaticTable</b></a>(FFDatabase, const char *, Vector).
<dd> Read a Flat-File static table.
<dt>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#FFDBRecycleIds"><b>FFDBRecycleIds</b></a>(const char *, int *, int).
<dd> Recycle ids from the lastid table.
<dt>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#FFDBRequestIds"><b>FFDBRequestIds</b></a>(FFDatabase, const char *, const char *, int, int, int *, int *).
<dd> Request one or more ids from the lastid table.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBSetAuthorWritable"><b>FFDBSetAuthorWritable</b></a>(FFDatabase, const char *, int).
<dd> Set the author access mode.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBSetDefaultAuthor"><b>FFDBSetDefaultAuthor</b></a>(FFDatabase, const char *).
<dd> Set the default author.
<dt>  <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBSetDirectoryDuration"><b>FFDBSetDirectoryDuration</b></a>(FFDatabase, double).
<dd> Set the Flat-File directory duration.
<dt>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#FFDBSetRequestIdIncrement"><b>FFDBSetRequestIdIncrement</b></a>(const char *, int).
<dd> Set the lastid request increment for keyname.
<dt>  <a href="libsrc_libFFDB_FFDBStatic.c.html#FFDBSetStaticTable"><b>FFDBSetStaticTable</b></a>(FFDatabase, const char *, const char *).
<dd> Set a static table filename.
<dt>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBTimeLimits"><b>FFDBTimeLimits</b></a>(FFDatabase, double *, double *).
<dd> Get query time limits.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBUpdate"><b>FFDBUpdate</b></a>(FFDatabase, CssTable).
<dd> Update a table.
<dt>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#FFDBUpdateLastid"><b>FFDBUpdateLastid</b></a>(FFDatabase, const char *, const char *, int, int *).
<dd> Update the lastid table.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBUpdateTable"><b>FFDBUpdateTable</b></a>(FFDatabase, const char *, CssTable, CssTable).
<dd> Update one database record.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBUpdateTables"><b>FFDBUpdateTables</b></a>(FFDatabase, const char *, int, CssTable *, CssTable *).
<dd> Update num database records.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBUpdateTablesWhere"><b>FFDBUpdateTablesWhere</b></a>(FFDatabase, const char *, int, int *, int, int *, int, CssTable *, CssTable *).
<dd> Update num database records.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBUpdateTableWhere"><b>FFDBUpdateTableWhere</b></a>(FFDatabase, const char *, int, int *, int, int *, CssTable, CssTable).
<dd> Update one database record.
<dt>  <a href="libsrc_libFFDB_FFDBUpdateTables.c.html#FFDBUpdateWhere"><b>FFDBUpdateWhere</b></a>(FFDatabase, int, int *, CssTable, const char *).
<dd> Update database records.
<dt>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#FFDBWriteStaticTable"><b>FFDBWriteStaticTable</b></a>(FFDatabase, CssTable).
<dd> Write a static table record to the database.
<dt>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#FFDBWriteTable"><b>FFDBWriteTable</b></a>(FFDatabase, CssTable, const char *, double).
<dd> Write a table record to the database.
</body>
</html>
