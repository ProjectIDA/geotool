<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by cdoc on Wed Jan 26 05:45:09 2005 -->
<title>
file libsrc/libgODBC/ODBCGetStruct.c
</title>
</head>
<body>
<a name="_top_"></a><pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libgODBC.html">This Directory</a>  <a href="libsrc_libgODBC_ODBCGetSchema.c.html#_top_">Previous</a>  <a href="libsrc_libgODBC_ODBCGetTableCols.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
File libsrc/libgODBC/ODBCGetStruct.c
</h1>
<hr>
<!End-Header> ODBCGetStruct returns CSS structures that hold the results of a query.
  Consider the following example code.
  <pre>
  #include "libgODBC.h"
  #include "libcssio.h"
  
  int
  main(int argc, char **argv)
  {
      int i, nwf, autoCommit=0;
      char *dataSource="ORACLE", *user="sel3", *passwd="sel3";
      char query[200], msg[100];
      SQLHDBC hdbc;
      WFDISC30 *w = NULL;
  
      /* connect to the data source
       */
      if((hdbc = ODBCConnect(dataSource, user, passwd, autoCommit)) == NULL) {
          logErrorMsg(LOG_WARNING, ODBCErrMsg());
          exit(1);
      }
  
      /* query for the wfdisc table
       */
      snprintf(query, 200, "select * from wfdisc where sta like 'FIA0'");
  
      if(ODBCGetStruct(hdbc, query, &nwf, (void **)&w, "wfdisc")) {
          logErrorMsg(LOG_WARNING, ODBCErrMsg());
      }
      ODBCDisconnect(hdbc);
  
      for(i = 0; i < nwf; i++) {
          if(cssioWriteWfdisc(stdout, &w[i])) {
              snprintf(msg, 100, "write_wfdisc error: %s", cssioGetErrorMsg());
              logWarning(LOG_WARNING, msg);
              break;
          }
      }
      if(w != NULL) free(w);
  }
  </pre>
 
  <p>
  See ODBCQueryTable for a comparable routine that returns CssTable structures.
<hr>
<h2>
Public Functions
</h2>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="ODBCGetStruct"><b>ODBCGetStruct</b></a>
<pre>
 int ODBCGetStruct(SQLHDBC hdbc,
                   const char *query,
                   int *numRows,
                   void **t,
                   const char *cssTableName)
</pre>
<dl>
<dd>   Return the full table rows of an sql query. Fill the approriate CSS
   structures.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> hdbc - A connection handle obtained from ODBCConnect().

<dd> query - An SQL query that should return full table rows.

<dd> numRows - The number of rows returned by the query and the number  of structures filled in t[].

<dd> t - An array of CSS structures. The array is allocated here and  can be freed by the calling routine.

<dd> cssTableName - The CSS3.0 table name of the expected rows (input).

<dt> <b>Returns:</b>
<dd> the number of structures returned in t[]. Returns -1 for an  error flag.  Retrieve the error number and error message  with ODBCErrno() and ODBCErrMsg().

</dl></dd>
<p>
<dd><dl>
<dt> <b>See Also:</b>
<dd> <a href="libsrc_libgODBC_ODBCQueryTable.c.html#ODBCQueryTable">ODBCQueryTable</a>
</dl></dd>
</dl>
<!Begin-Footer><hr>
<pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libgODBC.html">This Directory</a>  <a href="libsrc_libgODBC_ODBCGetSchema.c.html#_top_">Previous</a>  <a href="libsrc_libgODBC_ODBCGetTableCols.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
