<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by cdoc on Wed Jan 26 05:45:09 2005 -->
<title>
file libsrc/libgobject/DataLoop.c
</title>
</head>
<body>
<a name="_top_"></a><pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libgobject.html">This Directory</a>  <a href="libsrc_libgobject_CssTable.c.html#_top_">Previous</a>  <a href="libsrc_libgobject_DataPoint.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
File libsrc/libgobject/DataLoop.c
</h1>
<hr>
<!End-Header>This class represents a data buffer. It has methods for adding and   retrieving data from a data buffer. The buffer or loop has a minimum
   duration. When a new data segment is added to the loop the oldest segment
   might be discarded. This is done in a manner that maintains a least
   <b>minDuration</b> seconds of data in the loop.
<hr>
<h2>
Public Function Index
</h2>
<dl>
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#DataLoop_addSegment"><b>DataLoop_addSegment</b></a> (DataLoop, Segment)
<dd> Add a data segment to the loop.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#DataLoop_getData"><b>DataLoop_getData</b></a> (DataLoop, Vector, Segment)
<dd> Get segments from the loop.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#DataLoop_setMaxAge"><b>DataLoop_setMaxAge</b></a> (DataLoop, double)
<dd> Set the limit for old segments.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#DataLoop_setMaxFutureTime"><b>DataLoop_setMaxFutureTime</b></a> (DataLoop, double)
<dd> Set the start_time limit for future segments.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#DataLoop_setMaxOverlap"><b>DataLoop_setMaxOverlap</b></a> (DataLoop, double)
<dd> Set the limit for overlapping segments.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#DataLoop_setMinDuration"><b>DataLoop_setMinDuration</b></a> (DataLoop, double)
<dd> Set the loop minDuration.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#new_DataLoop"><b>new_DataLoop</b></a> (const char *, const char *, const char *, int, double)
<dd> Creates a new DataLoop.
</dl>
<h2>
Public Functions
</h2>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="DataLoop_addSegment"><b>DataLoop_addSegment</b></a>
<pre>
 void DataLoop_addSegment(DataLoop dl,
                          Segment s)
</pre>
<dl>
<dd> Add a data segment to the loop.
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="DataLoop_getData"><b>DataLoop_getData</b></a>
<pre>
 int DataLoop_getData(DataLoop dl,
                      Vector segments,
                      Segment lasts)
</pre>
<dl>
<dd> Get segments from the loop. Returns segments in the loop that have   been received since the segment <b>lasts</b> was received. If
   <b>lasts</b> is null, all segments in the loop are returned.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> s - a Segment array of size >= getNumSegments().

<dd> lasts - the last segment retrieved or null.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="DataLoop_setMaxAge"><b>DataLoop_setMaxAge</b></a>
<pre>
 void DataLoop_setMaxAge(DataLoop dl,
                         double maxAge)
</pre>
<dl>
<dd> Set the limit for old segments. A segment can not be  added to the loop if cpu time - segment->tbeg > maxAge
  The DataLoop does not check for future segment start times until
  this method is called the first time.

</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="DataLoop_setMaxFutureTime"><b>DataLoop_setMaxFutureTime</b></a>
<pre>
 void DataLoop_setMaxFutureTime(DataLoop dl,
                                double maxFutureTime)
</pre>
<dl>
<dd> Set the start_time limit for future segments. A segment can not be  added to the loop if its start_time > cpu time + maxFutureTime
  The DataLoop does not check for future segment start times until
  this method is called the first time.

</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="DataLoop_setMaxOverlap"><b>DataLoop_setMaxOverlap</b></a>
<pre>
 void DataLoop_setMaxOverlap(DataLoop dl,
                             double maxOverlap)
</pre>
<dl>
<dd> Set the limit for overlapping segments. A segment can not be  added to the loop if its start_time < loop_end_time - maxOverlap.
  The DataLoop does not check for overlapping dl->segments until
  this method is called.

</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="DataLoop_setMinDuration"><b>DataLoop_setMinDuration</b></a>
<pre>
 void DataLoop_setMinDuration(DataLoop dl,
                              double newMinDuration)
</pre>
<dl>
<dd> Set the loop minDuration. The loop will automatically adjust it's size   as new segments are added to insure that at least <b>newMinDuration</b>
   seconds of data are held.

</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="new_DataLoop"><b>new_DataLoop</b></a>
<pre>
 DataLoop new_DataLoop(const char *net,
                       const char *sta,
                       const char *chan,
                       int loopLength,
                       double minDuration)
</pre>
<dl>
<dd> Creates a new DataLoop. The loop size will automatically increase from   it's initial size, <b>loopLength</b>, to insure that at least 
   <b>minDuration</b> seconds of data are held in the loop.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> id - The loop id.

<dd> loopLength - The initial size of this loop (number of segments).

<dd> minDuration - The minimum duration in seconds of this loop.

</dl></dd>
</dl>
<!Begin-Footer><hr>
<pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libgobject.html">This Directory</a>  <a href="libsrc_libgobject_CssTable.c.html#_top_">Previous</a>  <a href="libsrc_libgobject_DataPoint.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
