<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by cdoc on Wed Jan 26 05:45:09 2005 -->
<title>
file libsrc/libshape/shpopen.c
</title>
</head>
<body>
<a name="_top_"></a><pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libshape.html">This Directory</a>  <a href="libsrc_libshape_dbfopen.c.html#_top_">Previous</a>  <a href="libsrc_libshape_shptree.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
File libsrc/libshape/shpopen.c
</h1>
<hr>
<!End-Header> $Id: shpopen.c,v 1.39 2002/08/26 06:46:56 warmerda Exp $
 
  Project:  Shapelib
  Purpose:  Implementation of core Shapefile read/write functions.
  Author:   Frank Warmerdam, warmerdam@pobox.com
 
 
  Copyright (c) 1999, 2001, Frank Warmerdam
 
  This software is available under the following "MIT Style" license,
  or at the option of the licensee under the LGPL (see LICENSE.LGPL).  This
  option is discussed in more detail in shapelib.html.
 
  --
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
 
  The above copyright notice and this permission notice shall be included
  in all copies or substantial portions of the Software.
 
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
  THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
 
 
  $Log: shpopen.c,v $
  Revision 1.39  2002/08/26 06:46:56  warmerda
  avoid c++ comments
 
  Revision 1.38  2002/05/07 16:43:39  warmerda
  Removed debugging printf.
 
  Revision 1.37  2002/04/10 17:35:22  warmerda
  fixed bug in ring reversal code
 
  Revision 1.36  2002/04/10 16:59:54  warmerda
  added SHPRewindObject
 
  Revision 1.35  2001/12/07 15:10:44  warmerda
  fix if .shx fails to open
 
  Revision 1.34  2001/11/01 16:29:55  warmerda
  move pabyRec into SHPInfo for thread safety
 
  Revision 1.33  2001/07/03 12:18:15  warmerda
  Improved cleanup if SHX not found, provied by Riccardo Cohen.
 
  Revision 1.32  2001/06/22 01:58:07  warmerda
  be more careful about establishing initial bounds in face of NULL shapes
 
  Revision 1.31  2001/05/31 19:35:29  warmerda
  added support for writing null shapes
 
  Revision 1.30  2001/05/28 12:46:29  warmerda
  Add some checking on reasonableness of record count when opening.
 
  Revision 1.29  2001/05/23 13:36:52  warmerda
  added use of SHPAPI_CALL
 
  Revision 1.28  2001/02/06 22:25:06  warmerda
  fixed memory leaks when SHPOpen() fails
 
  Revision 1.27  2000/07/18 15:21:33  warmerda
  added better enforcement of -1 for append in SHPWriteObject
 
  Revision 1.26  2000/02/16 16:03:51  warmerda
  added null shape support
 
  Revision 1.25  1999/12/15 13:47:07  warmerda
  Fixed record size settings in .shp file (was 4 words too long)
  Added stdlib.h.
 
  Revision 1.24  1999/11/05 14:12:04  warmerda
  updated license terms
 
  Revision 1.23  1999/07/27 00:53:46  warmerda
  added support for rewriting shapes
 
  Revision 1.22  1999/06/11 19:19:11  warmerda
  Cleanup pabyRec static buffer on SHPClose().
 
  Revision 1.21  1999/06/02 14:57:56  kshih
  Remove unused variables
 
  Revision 1.20  1999/04/19 21:04:17  warmerda
  Fixed syntax error.
 
  Revision 1.19  1999/04/19 21:01:57  warmerda
  Force access string to binary in SHPOpen().
 
  Revision 1.18  1999/04/01 18:48:07  warmerda
  Try upper case extensions if lower case doesn't work.
 
  Revision 1.17  1998/12/31 15:29:39  warmerda
  Disable writing measure values to multipatch objects if
  DISABLE_MULTIPATCH_MEASURE is defined.
 
  Revision 1.16  1998/12/16 05:14:33  warmerda
  Added support to write MULTIPATCH.  Fixed reading Z coordinate of
  MULTIPATCH. Fixed record size written for all feature types.
 
  Revision 1.15  1998/12/03 16:35:29  warmerda
  r+b is proper binary access string, not rb+.
 
  Revision 1.14  1998/12/03 15:47:56  warmerda
  Fixed setting of nVertices in SHPCreateObject().
 
  Revision 1.13  1998/12/03 15:33:54  warmerda
  Made SHPCalculateExtents() separately callable.
 
  Revision 1.12  1998/11/11 20:01:50  warmerda
  Fixed bug writing ArcM/Z, and PolygonM/Z for big endian machines.
 
  Revision 1.11  1998/11/09 20:56:44  warmerda
  Fixed up handling of file wide bounds.
 
  Revision 1.10  1998/11/09 20:18:51  warmerda
  Converted to support 3D shapefiles, and use of SHPObject.
 
  Revision 1.9  1998/02/24 15:09:05  warmerda
  Fixed memory leak.
 
  Revision 1.8  1997/12/04 15:40:29  warmerda
  Fixed byte swapping of record number, and record length fields in the
  .shp file.
 
  Revision 1.7  1995/10/21 03:15:58  warmerda
  Added support for binary file access, the magic cookie 9997
  and tried to improve the int32 selection logic for 16bit systems.
 
  Revision 1.6  1995/09/04  04:19:41  warmerda
  Added fix for file bounds.
 
  Revision 1.5  1995/08/25  15:16:44  warmerda
  Fixed a couple of problems with big endian systems ... one with bounds
  and the other with multipart polygons.
 
  Revision 1.4  1995/08/24  18:10:17  warmerda
  Switch to use SfRealloc() to avoid problems with pre-ANSI realloc()
  functions (such as on the Sun).
 
  Revision 1.3  1995/08/23  02:23:15  warmerda
  Added support for reading bounds, and fixed up problems in setting the
  file wide bounds.
 
  Revision 1.2  1995/08/04  03:16:57  warmerda
  Added header.
 
<hr>
<h2>
Public Function Index
</h2>
<dl>
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPClose"><b>SHPClose</b></a> (SHPHandle)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPComputeExtents"><b>SHPComputeExtents</b></a> (SHPObject *)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPCreate"><b>SHPCreate</b></a> (const char *, int)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPDestroyObject"><b>SHPDestroyObject</b></a> (SHPObject *)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPGetInfo"><b>SHPGetInfo</b></a> (SHPHandle, int *, int *, double *, double *)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPOpen"><b>SHPOpen</b></a> (const char *, const char *)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPRewindObject"><b>SHPRewindObject</b></a> (SHPHandle, SHPObject *)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#SHPWriteObject"><b>SHPWriteObject</b></a> (SHPHandle, int, SHPObject *)
</dl>
<h2>
Public Functions
</h2>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPClose"><b>SHPClose</b></a>
<pre>
 void SHPAPI_CALL SHPClose(<a href="include_shapefil.h.html#SHPHandle">SHPHandle</a> psSHP)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPComputeExtents"><b>SHPComputeExtents</b></a>
<pre>
 void SHPAPI_CALL SHPComputeExtents(<a href="include_shapefil.h.html#SHPObject">SHPObject</a> *psObject)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPCreate"><b>SHPCreate</b></a>
<pre>
 SHPHandle SHPAPI_CALL SHPCreate(const char *pszLayer,
                                 int nShapeType)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPDestroyObject"><b>SHPDestroyObject</b></a>
<pre>
 void SHPAPI_CALL SHPDestroyObject(<a href="include_shapefil.h.html#SHPObject">SHPObject</a> *psShape)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPGetInfo"><b>SHPGetInfo</b></a>
<pre>
 void SHPAPI_CALL SHPGetInfo(<a href="include_shapefil.h.html#SHPHandle">SHPHandle</a> psSHP,
                             int *pnEntities,
                             int *pnShapeType,
                             double *padfMinBound,
                             double *padfMaxBound)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPOpen"><b>SHPOpen</b></a>
<pre>
 SHPHandle SHPAPI_CALL SHPOpen(const char *pszLayer,
                               const char *pszAccess)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPRewindObject"><b>SHPRewindObject</b></a>
<pre>
 int SHPAPI_CALL SHPRewindObject(<a href="include_shapefil.h.html#SHPHandle">SHPHandle</a> hSHP,
                                 <a href="include_shapefil.h.html#SHPObject">SHPObject</a> *psObject)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="SHPWriteObject"><b>SHPWriteObject</b></a>
<pre>
 int SHPAPI_CALL SHPWriteObject(<a href="include_shapefil.h.html#SHPHandle">SHPHandle</a> psSHP,
                                int nShapeId,
                                <a href="include_shapefil.h.html#SHPObject">SHPObject</a> *psObject)
</pre>
<!Begin-Footer><hr>
<pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libshape.html">This Directory</a>  <a href="libsrc_libshape_dbfopen.c.html#_top_">Previous</a>  <a href="libsrc_libshape_shptree.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
