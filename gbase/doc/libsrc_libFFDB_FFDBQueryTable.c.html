<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by cdoc on Wed Jan 26 05:45:09 2005 -->
<title>
file libsrc/libFFDB/FFDBQueryTable.c
</title>
</head>
<body>
<a name="_top_"></a><pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libFFDB.html">This Directory</a>  <a href="libsrc_libFFDB_FFDBOpen.c.html#_top_">Previous</a>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
File libsrc/libFFDB/FFDBQueryTable.c
</h1>
<hr>
<!End-Header><h2>
Public Function Index
</h2>
<dl>
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBConvertDirToDate"><b>FFDBConvertDirToDate</b></a> (const char *, const char *, DateTime *)
<dd> Convert a database directory name to a DateTime.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBGetQueryTable"><b>FFDBGetQueryTable</b></a> (const char *, char *, int, char *, int)
<dd> Get the table that a query will return.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBQueryPrefix"><b>FFDBQueryPrefix</b></a> (FFDatabase, const char *, const char *, Vector)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBQueryTable"><b>FFDBQueryTable</b></a> (FFDatabase, const char *, const char *, Vector)
<dd> Fetch all table rows for a query.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBQueryTableClose"><b>FFDBQueryTableClose</b></a> (FFDB_QueryTableStruct)
<dd> Terminate a query that was initiated by FFDBQueryTableInit().
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBQueryTableInit"><b>FFDBQueryTableInit</b></a> (FFDatabase, const char *, const char *, FFDB_QueryTableStruct *)
<dd> Submit a query that will return full table rows.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBQueryTableResults"><b>FFDBQueryTableResults</b></a> (FFDB_QueryTableStruct, int, int *, Vector)
<dd> Fetch the table rows that result from a query submitted to
   FFDBQueryTableInit().
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBTimeLimits"><b>FFDBTimeLimits</b></a> (FFDatabase, double *, double *)
<dd> Get query time limits.
</dl>
<h2>
Public Functions
</h2>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBConvertDirToDate"><b>FFDBConvertDirToDate</b></a>
<pre>
 bool FFDBConvertDirToDate(const char *ds,
                           const char *name,
                           <a href="include_libtime.h.html#DateTime">DateTime</a> *dt)
</pre>
<dl>
<dd>  Convert a database directory name to a DateTime.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ds - The directory_structure format string.

<dd> ame - The directory name.

<dd> dt - The output DateTime structure.

<dt> <b>Returns:</b>
<dd> True for success, False if the conversion fails.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBGetQueryTable"><b>FFDBGetQueryTable</b></a>
<pre>
 int FFDBGetQueryTable(const char *query,
                       char *author,
                       int author_len,
                       char *name,
                       int name_len)
</pre>
<dl>
<dd>   Get the table that a query will return. Parse the input query to get the
   author (account) and table name of the table that the query will return.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> query - An SQL query that should return full table rows.

<dt> <b>Returns:</b>
<dd> 0 for success, -1 for failure. Retrieve the error  number and error message with FFDBErrno() and FFDBErrMsg().

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBQueryPrefix"><b>FFDBQueryPrefix</b></a>
<pre>
 int FFDBQueryPrefix(FFDatabase ffdb,
                     const char *query,
                     const char *cssTableName,
                     Vector table)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBQueryTable"><b>FFDBQueryTable</b></a>
<pre>
 int FFDBQueryTable(FFDatabase ffdb,
                    const char *query,
                    const char *cssTableName,
                    Vector table)
</pre>
<dl>
<dd>  Fetch all table rows for a query. All the table rows are returned for
   the input query as CssTable objects.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dd> query - An SQL query that should return full table rows.

<dd> cssTableName - The CSS table name of the expected rows (input).

<dd> table - A Vector array to receive the CssTable objects.

<dt> <b>Returns:</b>
<dd> 0 for success, -1 for failure.  Retrieve the error number and  error message with FFDBErrno() and FFDBErrMsg().

</dl></dd>
<p>
<dd><dl>
<dt> <b>See Also:</b>
<dd> <a href="libsrc_libFFDB_FFDBOpen.c.html#FFDBOpen">FFDBOpen</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrno">FFDBErrno</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrMsg">FFDBErrMsg</a>
<dd> <a href="libsrc_libgobject_Vector.c.html#new_Vector">new_Vector</a>
</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBQueryTableClose"><b>FFDBQueryTableClose</b></a>
<pre>
 int FFDBQueryTableClose(FFDB_QueryTableStruct qs)
</pre>
<dl>
<dd>   Terminate a query that was initiated by FFDBQueryTableInit().
   This routine can be called anytime after FFDBQueryTableInit(). All rows
   that have not been fetched with FFDBQueryTableResults() will be
   discarded. This routine should be called to free the resources allocated
   by FFDBQueryTableInit.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> qs - A FFDB_QueryTableStruct pointer that was obtained from  FFDBQueryTableInit().

<dt> <b>Returns:</b>
<dd> 0 for success, -1 for failure.  Retrieve the error number and  error message with FFDBErrno() and FFDBErrMsg().

</dl></dd>
<p>
<dd><dl>
<dt> <b>See Also:</b>
<dd> <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableInit">FFDBQueryTableInit</a>
<dd> <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableResults">FFDBQueryTableResults</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrno">FFDBErrno</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrMsg">FFDBErrMsg</a>
</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBQueryTableInit"><b>FFDBQueryTableInit</b></a>
<pre>
 int FFDBQueryTableInit(FFDatabase ffdb,
                        const char *query,
                        const char *cssTableName,
                        FFDB_QueryTableStruct *qs)
</pre>
<dl>
<dd>   Submit a query that will return full table rows. This routine is used
   together with FFDBQueryTableResults() and FFDBQueryTableClose() to
   submit a query and fetch the results in chunks. An FFDB_QueryTableStruct
   pointer is returned that can be used to retrieve the desired number of
   table rows with FFDBQueryTableResults().

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dd> query - An SQL query that should return full table rows.

<dd> cssTableName - The CSS table name of the expected rows (input). If  NULL, the routine will try to determine the table name from the query.

<dd> qs - A FFDB_QueryTableStruct pointer that is returned.

<dt> <b>Returns:</b>
<dd> 0 for success, -1 for failure.  Retrieve the error number and  error message with FFDBErrno() and FFDBErrMsg().

</dl></dd>
<p>
<dd><dl>
<dt> <b>See Also:</b>
<dd> <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableResults">FFDBQueryTableResults</a>
<dd> <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableClose">FFDBQueryTableClose</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrno">FFDBErrno</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrMsg">FFDBErrMsg</a>
</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBQueryTableResults"><b>FFDBQueryTableResults</b></a>
<pre>
 int FFDBQueryTableResults(FFDB_QueryTableStruct qs,
                           int numToFetch,
                           int *numFetched,
                           Vector records)
</pre>
<dl>
<dd>   Fetch the table rows that result from a query submitted to
   FFDBQueryTableInit(). The rows are returned as CssTable objects in the
   Vector table. The CssTable objects are <b>appended</b> to the Vector.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> qs - A FFDB_QueryTableStruct pointer that was obtained from  FFDBQueryTableInit().

<dd> numToFetch - The maximum number of table rows this routine will return.

<dd> numFetched - The actual number of table rows returned.

<dd> table - A vector to hold the CssTable objects. Objects are appended.

<dt> <b>Returns:</b>
<dd> the number of rows fetched or -1 for failure.  Retrieve the error  number and error message with FFDBErrno() and FFDBErrMsg().

</dl></dd>
<p>
<dd><dl>
<dt> <b>See Also:</b>
<dd> <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableInit">FFDBQueryTableInit</a>
<dd> <a href="libsrc_libFFDB_FFDBQueryTable.c.html#FFDBQueryTableClose">FFDBQueryTableClose</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrno">FFDBErrno</a>
<dd> <a href="libsrc_libFFDB_FFDBError.c.html#FFDBErrMsg">FFDBErrMsg</a>
</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBTimeLimits"><b>FFDBTimeLimits</b></a>
<pre>
 int FFDBTimeLimits(FFDatabase ffdb,
                    double *tmin,
                    double *tmax)
</pre>
<dl>
<dd>  Get query time limits. Return the time limits, if there were any, for the
  most recent query on the database. If no time limit was used, tmin and/or
  tmax will be returned as NULL_TIME.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - 
<dd> tmin - The returned minimum time limit or NULL_TIME.

<dd> tmin - The returned maximum time limit or NULL_TIME.

<dt> <b>Returns:</b>
<dd> 0 if both tmin and tmax are available. Returns -1 if one or both  are set to NULL_TIME.

</dl></dd>
</dl>
<!Begin-Footer><hr>
<pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libFFDB.html">This Directory</a>  <a href="libsrc_libFFDB_FFDBOpen.c.html#_top_">Previous</a>  <a href="libsrc_libFFDB_FFDBRequestIds.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
