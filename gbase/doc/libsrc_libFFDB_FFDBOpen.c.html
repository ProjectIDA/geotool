<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<!-- Generated by cdoc on Wed Jan 26 05:45:09 2005 -->
<title>
file libsrc/libFFDB/FFDBOpen.c
</title>
</head>
<body>
<a name="_top_"></a><pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libFFDB.html">This Directory</a>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#_top_">Previous</a>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
<hr>
<h1>
File libsrc/libFFDB/FFDBOpen.c
</h1>
<hr>
<!End-Header> These are routines for opening and closing a Flat-File database, and
  setting the default author and the directory duration.
<hr>
<h2>
Public Function Index
</h2>
<dl>
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBAuthors"><b>FFDBAuthors</b></a> (FFDatabase, char ***)
<dd> Get the Flat-File database authors.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBClose"><b>FFDBClose</b></a> (FFDatabase)
<dd> Close a Flat-File database.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBDefaultAuthor"><b>FFDBDefaultAuthor</b></a> (FFDatabase)
<dd> Get the default author.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBDirectoryDuration"><b>FFDBDirectoryDuration</b></a> (FFDatabase)
<dd> Get the Flat-File directory duration.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBGetAuthorWritable"><b>FFDBGetAuthorWritable</b></a> (FFDatabase, const char *)
<dd> Get the author access mode.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBOpen"><b>FFDBOpen</b></a> (const char *, const char *, const char *, double)
<dd> Open a Flat-File database.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBOpenPrefix"><b>FFDBOpenPrefix</b></a> (const char *)
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBSetAuthorWritable"><b>FFDBSetAuthorWritable</b></a> (FFDatabase, const char *, int)
<dd> Set the author access mode.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBSetDefaultAuthor"><b>FFDBSetDefaultAuthor</b></a> (FFDatabase, const char *)
<dd> Set the default author.
 <dt> <img src="red_ball_small.gif" width=6 height=6 alt=" o ">
      <a href="#FFDBSetDirectoryDuration"><b>FFDBSetDirectoryDuration</b></a> (FFDatabase, double)
<dd> Set the Flat-File directory duration.
</dl>
<h2>
Public Functions
</h2>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBAuthors"><b>FFDBAuthors</b></a>
<pre>
 int FFDBAuthors(FFDatabase ffdb,
                 char ***authors)
</pre>
<dl>
<dd>  Get the Flat-File database authors. Get all authors found in the database.
  Each author has a directory under the parameter root.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dd> authors - The returned array of author names. Free each name and  the array.

<dt> <b>Returns:</b>
<dd> The number of authors.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBClose"><b>FFDBClose</b></a>
<pre>
 void FFDBClose(FFDatabase ffdb)
</pre>
<dl>
<dd>  Close a Flat-File database.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBDefaultAuthor"><b>FFDBDefaultAuthor</b></a>
<pre>
 char *FFDBDefaultAuthor(FFDatabase ffdb)
</pre>
<dl>
<dd>  Get the default author. Get the default author that is used in queries where
  an author is not prefixed to a table name.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dt> <b>Returns:</b>
<dd> The default author. Free after use.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBDirectoryDuration"><b>FFDBDirectoryDuration</b></a>
<pre>
 double FFDBDirectoryDuration(FFDatabase ffdb)
</pre>
<dl>
<dd>  Get the Flat-File directory duration.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dt> <b>Returns:</b>
<dd> The directory duration.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBGetAuthorWritable"><b>FFDBGetAuthorWritable</b></a>
<pre>
 int FFDBGetAuthorWritable(FFDatabase ffdb,
                           const char *author)
</pre>
<dl>
<dd>  Get the author access mode. Returns 1, if the author can be read from and
  written to. Returns 0, if the author's mode is read only.  Returns -1, if
  the author does not exist. The default access mode for all authors after
  FFDBOpen is 1, writable. Use FFDBSetAuthorWritable to change the mode.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dd> author - The author name.

<dt> <b>Returns:</b>
<dd> 0 or 1 for success, -1 if author does not exist.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBOpen"><b>FFDBOpen</b></a>
<pre>
 FFDatabase FFDBOpen(const char *param_root,
                     const char *seg_root,
                     const char *directory_structure,
                     double directory_duration)
</pre>
<dl>
<dd>  Open a Flat-File database.
  An FFDatabase pointer is returned, or NULL is returned if the database cannot
  be opened. The environment variable GEOTOOL_HOME is used as an alternative
  location for static table files that are not found under (param_root)/static.
  Use FFDBErrMsg() and FFDBErrno() to obtain the error message and
  error number. Possible errors are:
  <pre>
     FFDB_NO_PARAM_ROOT  The parameter root does not exist or will not open.
     FFDB_NO_SEG_ROOT    The segment root does not exist or will not open.
     FFDB_MALLOC_ERR     A call to malloc failed.
  </pre>

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> param_root - The parameter directory root for the database.

<dd> seg_rooot - The segment directory root for the database.

<dd> directory_structure - The strftime/strptime format of the directories.

<dd> directory_duration - The time duration of the lowest directories.

<dt> <b>Returns:</b>
<dd> The FFDatabase pointer or NULL if the database cannot be opened.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBOpenPrefix"><b>FFDBOpenPrefix</b></a>
<pre>
 FFDatabase FFDBOpenPrefix(const char *prefix)
</pre>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBSetAuthorWritable"><b>FFDBSetAuthorWritable</b></a>
<pre>
 int FFDBSetAuthorWritable(FFDatabase ffdb,
                           const char *author,
                           int mode)
</pre>
<dl>
<dd>  Set the author access mode.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dd> author - The author name.

<dd> mode - input 0 for read only. Input 1 for read and write access.

<dt> <b>Returns:</b>
<dd> 0, -1 if author does not exist.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBSetDefaultAuthor"><b>FFDBSetDefaultAuthor</b></a>
<pre>
 int FFDBSetDefaultAuthor(FFDatabase ffdb,
                          const char *author)
</pre>
<dl>
<dd>  Set the default author. Set the default author that will be used in
  queries where an author is not prefixed to a table name.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dd> author - The default author.

<dt> <b>Returns:</b>
<dd> 0 for success, -1 if the input author does not exist in the database.

</dl></dd>
</dl>
<img src="red_ball.gif" width=12 height=12 alt= " o ">
<a name="FFDBSetDirectoryDuration"><b>FFDBSetDirectoryDuration</b></a>
<pre>
 void FFDBSetDirectoryDuration(FFDatabase ffdb,
                               double directory_duration)
</pre>
<dl>
<dd>  Set the Flat-File directory duration.

<p>
<dd><dl>
<dt> <b>Parameters:</b>
<dd> ffdb - An FFDatabase pointer obtained from FFDBOpen().

<dd> directory_duration - The directory duration.

</dl></dd>
</dl>
<!Begin-Footer><hr>
<pre>
<a href="directories.html">All directories</a>  <a href="libsrc_libFFDB.html">This Directory</a>  <a href="libsrc_libFFDB_FFDBInsertTables.c.html#_top_">Previous</a>  <a href="libsrc_libFFDB_FFDBQueryTable.c.html#_top_">Next</a>  <a href="AllNames.html">Index</a></pre>
</body>
</html>
